The happy ending exists because she decides to atone for her own sins through the novel.
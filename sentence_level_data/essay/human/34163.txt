The legalization of same-sex marriage in 2008 also played a role in pushing up the pattern of immigrants in the state.
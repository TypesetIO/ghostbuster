The battle raged for weeks, with both sides suffering heavy losses.